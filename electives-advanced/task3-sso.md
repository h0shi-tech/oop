# Задача № 3
# Small String Optimization

## Срок сдачи

До 31 марта включительно.



## Задание

Разработать класс `String`, поддерживающий Small String Optimization (SSO).

Профиль и поведение любого метода должны соответствовать стандартному классу
[std::string](https://en.cppreference.com/w/cpp/string/basic_string),
если явно не указано другое.

Запрещено использовать любые классы стандартной библиотеки языка (кроме классов исключений).

Основные требования:

1. `sizeof(String) = 32`
1. Для строк размером до 30 содержательных символов без учёта терминального нуля
   (или до 31 символов с учётом терминального нуля) динамическая память использоваться не должна.
1. Класс должен быть копируемым.
1. Конструкторы:
   - по умолчанию (пустая строка);
   - на основе Си-строки.
1. Константные методы:
   - `c_str`;
   - `capacity`;
   - `contains`;
   - `size`;
   - `substr`.
1. Неконстантные методы:
   - `clear`:
     - устанавливает размер в 0 и выставляет в первый символ строки терминальный ноль;
     - перераспределением памяти не занимается.
   - `reserve`:
     - если запрашиваемая ёмкость меньше или равна текущей, то ничего не делает.
   - `shrink_to_fit`;
   - `swap`.
1. Операторы:
   - `[]` для доступа и изменения символов строки,
     при некорректном индексе должно генерироваться исключение
     [std::out_of_range](https://en.cppreference.com/w/cpp/error/out_of_range);
   - `+=` и `+` для конкатенации строк;
   - `<<` для вывода строки в указанный поток вывода.



## Подсказка

Все основные методы и операторы не должны заботиться о том, какой массив (статический или динамический) использовать.
Предусмотрите вспомогательный приватный метод `storage()`, который вернёт указатель на реальное хранилище (статический или динамический массив). Такой вспомогательный метод понадобится в константной и неконстантной перегрузках.

Тогда код, который *знает* про SSO, сконцентрируется в очень ограниченном числе методов -
`storage`, `reserve` и `capacity`.
